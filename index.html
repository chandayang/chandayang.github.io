<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>chandayang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I&apos;m coding">
<meta property="og:type" content="website">
<meta property="og:title" content="chandayang's blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="chandayang's blog">
<meta property="og:description" content="I&apos;m coding">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="chandayang's blog">
<meta name="twitter:description" content="I&apos;m coding">
  
    <link rel="alternative" href="/atom.xml" title="chandayang&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">chandayang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">前端程序媛一枚</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>標籤</li>
						
						<li>友情链接</li>
						
						
						<li>關於</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">chandayang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="null" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">chandayang</h1>
			</hgroup>
			
			<p class="header-subtitle">前端程序媛一枚</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-js继承学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/04/js继承学习/" class="article-date">
  	<time datetime="2016-10-04T04:57:10.315Z" itemprop="datePublished">2016-10-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>js里常用的如下两种继承方式：<br>原型链继承（对象间依靠原型链来实现继承）</p>
<p>类式继承（在子类型构造函数的内部调用超类型的构造函数）</p>
<p>由于js不像Java那样是真正面向对象的语言，js是基于对象的，它没有类的概念。所以，要想实现继承，可以用js的原型<br>prototype机制或者用apply和call方法去实现。<br>借用构造函数（类式继承）</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;借用构造函数（类式继承）&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        /*  
        在js中，被继承的函数称为超类型（父类，基类也行），继承的函数称为子类型（子类，派生类）。使用原型继承主要由两个问题：  
        一是字面量重写原型会中断关系，使用引用类型的原型，并且子类型还无法给超类型传递参数。  

        伪类解决引用共享和超类型无法传参的问题，我们可以采用“借用构造函数”技术  
         */  
        function Parent(age){  
            this.colors=[&apos;red&apos;,&apos;blue&apos;,&apos;green&apos;];  
            this.age=age;  
        }  
        function Child(age){  
            Parent.call(this,age);  
        }  
        var child=new Child(&quot;lisi&quot;);  
        var child2=new Child(&quot;zhangsan&quot;);  
        var obj=new Parent(&quot;wangwu&quot;);  
        console.log(child.age);//lisi  
        console.log(child.colors);//[&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]  
        child.colors.push(&quot;yellow&quot;);  
        console.log(child.colors);// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;]  
        console.log(obj.colors);// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]  
        console.log(child2.colors);//[&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]  
        /*  
        借用构造函数虽然解决了刚才两种问题，但没有原型，则复用无从谈起，所以我们需要原型链+借用构造函数的模式，这种模式称为组合继承  
         */  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>原型链继承</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;原型继承&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        //原型式继承是借助已有的对象创建新的对象，将子类的原型指向父类，就相当于加入了父类这条原型链  
        //为了让子类继承父类的属性（也包括方法），首先需要定义一个构造函数。然后，将父类的新实例赋值给子类构造函数的原型。代码如下：  
        function Parent(){  
            this.age=12;  
        }  
        function Child(){  
            this.name=&quot;lisi&quot;;  
        }  
        Child.prototype=new Parent();//Child继承Parent，通过原型，形成链条  
        var test=new Child();  
        console.log(test.name);//lisi  
        console.log(test.age);//12  得到被继承的属性  
        //继续原型链继承  
        function Brother(){  
            this.job=&quot;worker&quot;;  
        }  
        Brother.prototype=new Child();//继续原型链继承  
        var person=new Brother();  
        person.name=&quot;wangwu&quot;;  
        console.log(person.name);//wangwu  实例属性覆盖原型属性  
        console.log(person.age);//12  继承了Parent和Child,弹出12和lisi  
        console.log(person.job);//worker  

        //以上原型链继承还缺少一环，那就是Object，所有的构造函数都继承自Object。而继承Object是自动完成的，并不需要我们自己手动继承  

        //确定原型和实例的关系  
        //可以通过两种方式来确定原型和实例之间的关系。操作符instanceof和isPrototypeof()方法：  
        console.log(person instanceof Brother);//true  
        console.log(person instanceof Child);//true  
        console.log(person instanceof Parent);//true  
        console.log(Brother.prototype.isPrototypeOf(person));//true  
        console.log(Child.prototype.isPrototypeOf(Brother.prototype));//true  
        console.log(Child.prototype.isPrototypeOf(test));//true  
        console.log(Parent.prototype.isPrototypeOf(Child.prototype));//true  
        //只要是原型链中出现过的原型，都可以说是该原型链派生的实例的原型，因此，isPrototypeof()方法也会返回true  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>Child.prototype=new Parent();这一行相当于完全删除了Child的prototype 对象原先的值，然后赋予一个新值。</p>
<p>这样赋值之后，需要重新指定：Child.prototype.constructor = Child;</p>
<p>因为任何一个prototype对象都有一个constructor属性，指向它的构造函数。如果没有”Child.prototype=new Parent();”这一行，Child.prototype.constructor是指向Child的；加了这一行以后，Child.prototype.constructor指向Parent。所以为了确保Child.prototype.constructor是指向Child，需要重新指定Child.prototype.constructor = Child;</p>
<p>更重要的是：每一个实例也有一个constructor属性，默认调用prototype对象的constructor属性。</p>
<p>[javascript] view plain copy</p>
<pre><code>console.log(child.constructor == Child.prototype.constructor);//true  
</code></pre><p>[javascript] view plain copy</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;  
    function Parent(name){  
        this.name = name;  
    }  
    function Child(age){  
        this.age = age;  
    }  
    Child.prototype = new Parent();  
    var child = new Child(&quot;lisi&quot;,23);  
    console.log(child.constructor == Child.prototype.constructor);//false  
    console.log(child.constructor == Parent);//true  
    &lt;/script&gt;  
</code></pre><p>但是，在运行”Child.prototype = new Parent();”这一行之后，Child.constructor也指向Parent！</p>
<p>[javascript] view plain copy</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;javascript&quot;&gt;console.log(child.constructor == Parent);//true  
</code></pre><p>这显然会导致继承链的紊乱（child明明是用构造函数Child生成的），因此我们必须手动纠正，将Child.prototype对象的constructor值改为Child。这就是需要重新指定：Child.prototype.constructor = Child;的意义所在。</p>
<p>这是很重要的一点，编程时务必要遵守。下文都遵循这一点，即如果替换了prototype对象，<br>　　<br>[javascript] view plain copy</p>
<pre><code>o.prototype = {};  
</code></pre><p>那么，下一步必然是为新的prototype对象加上constructor属性，并将这个属性指回原来的构造函数。<br>[javascript] view plain copy</p>
<pre><code>o.prototype.constructor = o;  
</code></pre><p>直接继承prototype<br>[javascript] view plain copy</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;  
//由于Parent对象中，不变的属性都可以直接写入Parent.prototype。所以，我们也可以让Child()跳过 Parent()，直接继承Parent.prototype。  
    function Parent(name){  
        this.name = name;  
    }  
    function Child(age){  
        this.age = age;  
    }  
    //将Child的prototype对象，然后指向Parent的prototype对象，这样就完成了继承  
    Child.prototype = Parent.prototype;  
    Child.prototype.constructor = Child;//这里同样会修改Parent的构造函数  
    var child = new Child(&quot;lisi&quot;,23);  
    console.log(Child.prototype.constructor);//Child  
    console.log(Parent.prototype.constructor);//Child  
    /* 
    与前一种方法相比，这样做的优点是效率比较高（不用执行和建立Parent的实例了），比较省内存。缺点是 Child.prototype和Parent.prototype现在指向了同一个对象，那么任何对Child.prototype的修改，都会反映到Parent.prototype。 
     */  
&lt;/script&gt;  
</code></pre><p>原型式继承</p>
<p>原型式继承，要求必须有一个对象可以作为另一个对象的基础。如果有这么一个对象的话，可以把它传递给obj函数，然后再根据具体要求对得到的对象加以修改即可。在这个例子中，可以作为另一个对象基础的是box对象，我们将其传入obj()函数，然后该函数就会返回一个新对象。这个新对象将box作为原型，所以它的原型中就包含一个基本类型值属性和一个引用类型值属性。也就说box.family不仅属于box所有，而且也会被a1和a2共享。这就相当于又创建了box对象的两个副本(即对box对象进行了浅复制)。</p>
<p>这种继承方式的缺点是：包含引用类型值的属性始终都会共享相应的值。</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;原型式继承&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        //这种继承借助原型并基于已有的对象创建新对象，同时还不用创建自定义类型的方式称为原型式继承  
        //原型式继承首先在obj()函数内部创建一个临时性的构造函数 ，然后将传入的对象作为这个构造函数的原型，最后返回这个临时类型的一个新实例。  
        function obj(o){  
            function F(){}  
            F.prototype=o;  
            return new F();  
        }  
        var box={  
            name:&quot;lisi&quot;,  
            family:[&apos;brother&apos;,&apos;sister&apos;,&apos;me&apos;]//包含引用类型值的属性始终都会共享相应的值  
        };  
        var a1=obj(box);  
        console.log(a1.name);//lisi  
        a1.name=&quot;wangwu&quot;;  
        console.log(a1.name);//wangwu  
        console.log(a1.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;]  
        a1.family.push(&quot;mother&quot;);  
        console.log(a1.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;]  

        var a2=obj(box);  
        console.log(a2.name);//lisi  
        console.log(a2.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;]  
        console.log(box.family);//[&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;]  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>Object.create()原型式继承<br>[javascript] view plain copy</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;  
    //ECMAScript5新增了Object.create()方法规范化了原型式继承。这个方法接收两个参数：一个用作新对象原型的对象和可选参数--一个为新对象定义额外属性的对象。  
        var box = {  
            name:&quot;lisi&quot;,  
            family:[&apos;brother&apos;,&apos;sister&apos;,&apos;me&apos;]//包含引用类型值的属性始终都会共享相应的值  
        };  
        var a1 = Object.create(box);  
        console.log(a1.name);//lisi  
        a1.name = &quot;wangwu&quot;;  
        console.log(a1.name);//wangwu  
        console.log(a1.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;]  
        a1.family.push(&quot;mother&quot;);  
        console.log(a1.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;]  

        /* 
        Object.create()方法的第二个参数与Object.defineProperties()方法的第二个参数格式相同：每个属性都是通过自己的描述符定义的。以这种方式指定的任何属性都会覆盖原型对象上的同名属性。 
         */  
        var a2 = Object.create(box,{  
            name:{  
                //描述符对象  
                value:&quot;赵六&quot;  
            }  
        });  
        console.log(a2.name);//赵六  覆盖了原型上的name属性  
        a2.family.push(&quot;child&quot;);  
        console.log(a2.family);// [&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;, &quot;child&quot;]  
        console.log(box.family);//[&quot;brother&quot;, &quot;sister&quot;, &quot;me&quot;, &quot;mother&quot;, &quot;child&quot;]  
    &lt;/script&gt;  
</code></pre><p>组合继承<br> 组合式继承是比较常用的一种继承方法，其背后的思路是：使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承。这样，既通过在原型上定义方法实现了函数复用，又保证每个实例都有它自己的属性。</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;组合继承&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        function Parent(age){  
            this.colors=[&apos;red&apos;,&apos;blue&apos;,&apos;green&apos;];  
            this.age=age;  
        }  
        Parent.prototype.run=function(){  
            console.log(this.colors+&apos;---&apos;+this.age);  
        }  
        function Child(age){  
            Parent.call(this,age)//继承属性  对象冒充，给超类型传参  
        }  
        Child.prototype=new Parent();//原型链继承,继承原型方法  
        var child=new Child(&quot;lisi&quot;);  
        child.run();//red,blue,green---lisi  
        /*  
        call()的用法：改变this指向。  
         */  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>寄生式继承</p>
<p>这种继承方式是把原型式+工厂模式结合起来，目的是为了封装创建的过程。</p>
<p>根据已有对象person，利用原型式继承返回一个新的对象，并根据要求对该对象进行增强。</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;寄生式继承&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        //这种继承方式是把原型式+工厂模式结合起来，目的是为了封装创建的过程。  
         function obj(o){  
            function F(){}  
            F.prototype=o;  
            return new F();  
        }  
        function createAnother(original){//工厂模式  
            var clone=obj(original);//通过调用obj函数创建一个新对象  
            clone.sayHi=function(){//根据要求增强新对象  
                console.log(&quot;Hi&quot;);  
            };  
            return clone;  
        }  
        var person={  
            name:&apos;liujie&apos;,  
            family:[&quot;father&quot;,&quot;mother&quot;,&quot;sister&quot;]  
        };  
        var anotherPerson=createAnother(person);  
        //anotherPerson是返回的新对象，不仅具有person的属性和方法，还有自己的sayHi方法  
        anotherPerson.sayHi();//Hi  
        console.log(anotherPerson.name);//liujie  
        console.log(anotherPerson.family);// [&quot;father&quot;, &quot;mother&quot;, &quot;sister&quot;]  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>组合式继承的小问题</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;组合式继承的小问题&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        //组合式继承是js最常用的继承模式，但组合继承的超类型在使用过程中会被调用两次；一次是创建子类型原型的时候，另一次是在子类型构造函数的内部  
        //子类型最终会包含超类型对象的全部实例属性  
        function SuperType(name){  
            this.name=name;  
            this.color=[&apos;red&apos;,&apos;blue&apos;,&apos;yellow&apos;];  
        }  
        SuperType.prototype.sayName=function(){  
            console.log(this.name);  
        };  
        function SubType(name,age){  
            SuperType.call(this,name);//第二次调用SuperType()  
            this.age=age;  
        }  
        SubType.prototype=new SuperType();//第一次调用SuperType()  
        console.log(SubType.prototype.constructor);//SuperType(name)  
        SubType.prototype.constructor=SubType;//这里如果不设置SubType.prototype.constructor将指向SuperType()  因为上面实现继承的同时也重写了SubType.prototype  
        SubType.prototype.sayAge=function(){  
            console.log(this.age);  
        };  
    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>寄生组合式继承<br>这种方式的目的就在于：解决组合继承中父类构造函数调用两次造成的子类原型上创建多余的、不必要的属性的问题。<br>所谓寄生组合式继承，即通过借用构造函数来继承属性，通过原型链的混成形式来继承方法。<br> 基本思路是：不必为指定子类型的原型而调用超类型的构造函数，我们所需要的无非就是超类型原型的一个副本而已。我们可以使用寄生式继承来继承超类型的原型，然后再将结果指定给子类型的原型。这样就可以避免两次调用父类的构造函数，不会在子类原型上创建多余的、不必要的属性。</p>
<p>[html] view plain copy<br>在CODE上查看代码片派生到我的代码片</p>
<pre><code>&lt;!DOCTYPE html&gt;  
&lt;html lang=&quot;en&quot;&gt;  
    &lt;head&gt;  
        &lt;meta charset=&quot;utf-8&quot;&gt;  
        &lt;title&gt;寄生组合式继承&lt;/title&gt;  
    &lt;/head&gt;  
    &lt;body&gt;  
    &lt;script type=&quot;text/javascript&quot;&gt;  
        function object(o){//o=SuperType.prototype  
            function F(){}  
            F.prototype = o;//F.prototype=SuperType.prototype  
            return new F();//这里返回父类原型的副本  
        }  
        function inheritPrototype(subType, superType){  
            var prototype = object(superType.prototype);   //创建对象   其实就是超类型原型的一个副本  
            //console.log(prototype);// SuperType { sayName=function()}  
            //console.log(prototype.constructor);//SuperType(name)  
            prototype.constructor = subType;  //增强对象   为创建的副本添加constructor 属性，从而弥补下一步重写子类原型而让子类失去默认的constructor 属性  
            subType.prototype = prototype;   //指定对象  将超类型原型的副本赋值给子类原型  这样就实现了继承  
            //console.log(subType.prototype.constructor);//SubType(name, age)  
        }  

        function SuperType(name){  
            this.name = name;  
            this.colors = [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;];  
        }  

        SuperType.prototype.sayName = function(){  
            alert(this.name);  
        };  

        function SubType(name, age){  
            SuperType.call(this, name);//继承属性  
            this.age = age;  
        }  

        inheritPrototype(SubType, SuperType);//通过这里实现继承  

        SubType.prototype.sayAge = function(){//子类的原型方法  
            alert(this.age);  
        };  

        var instance1 = new SubType(&quot;Nicholas&quot;, 29);  
        instance1.colors.push(&quot;black&quot;);  
        alert(instance1.colors);  //&quot;red,blue,green,black&quot;  
        instance1.sayName();      //&quot;Nicholas&quot;;  
        instance1.sayAge();       //29  


        var instance2 = new SubType(&quot;Greg&quot;, 27);  
        alert(instance2.colors);  //&quot;red,blue,green&quot;   引用问题解决  
        instance2.sayName();      //&quot;Greg&quot;;  
        instance2.sayAge();       //27  

    &lt;/script&gt;  
    &lt;/body&gt;  
&lt;/html&gt;  
</code></pre><p>js继承方式及其优缺点</p>
<p>原型链继承的缺点</p>
<p>一是字面量重写原型会中断关系，使用引用类型的原型，并且子类型还无法给超类型传递参数。</p>
<p>借用构造函数（类式继承）</p>
<p>借用构造函数虽然解决了刚才两种问题，但没有原型，则复用无从谈起。所以我们需要原型链+借用构造函数的模式，这种模式称为组合继承</p>
<p>组合式继承</p>
<p>组合式继承是比较常用的一种继承方法，其背后的思路是：使用原型链实现对原型属性和方法的继承，而通过借用构造函数来实现对实例属性的继承。这样，既通过在原型上定义方法实现了函数复用，又保证每个实例都有它自己的属性。</p>
<p>组合继承缺点：组合继承最大的问题：就是无论什么情况下，都会调用两次超类型构造函数。一次是在创建子类原型的时候，另一次是在子类型构造函数内部。子类型最终会包含超类型对象的全部实例属性，但我们不得不在调用子类型构造函数时重写这些属性。这样就会导致在子类原型上创建不必要的、多余的属性。<br>非构造函数的继承<br>浅拷贝继承<br>[javascript] view plain copy</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;  
//把父对象的属性，全部拷贝给子对象，也能实现继承  
var Parent = {  
    name:&quot;lisi&quot;,  
    friends:[&apos;wangwu&apos;,&apos;zhaoliu&apos;]  
};  
function extendCopy(p){  
    var c = {};  
    for(var i in p){  
        c[i] = p[i];  
    }  
    return c;  
}  
var Child = extendCopy(Parent);  
Child.age = 23;  
Child.friends.push(&quot;zhangsan&quot;);  
console.log(Child.name);//lisi  
console.log(Child.friends);//[&quot;wangwu&quot;, &quot;zhaoliu&quot;, &quot;zhangsan&quot;]  
console.log(Parent.friends);//[&quot;wangwu&quot;, &quot;zhaoliu&quot;, &quot;zhangsan&quot;]  
//缺点：这样的拷贝有一个问题。那就是，如果父对象的属性等于数组或另一个对象，那么实际上，子对象获得的只是一个内存地址，而不是真正拷贝，因此存在父对象被篡改的可能。上例中父对象的friends属性就被修改了。  
//所以，extendCopy()只是拷贝基本类型的数据，我们把这种拷贝叫做&quot;浅拷贝&quot;。这是早期jQuery实现继承的方式。  
&lt;/script&gt;  
</code></pre><p>深拷贝继承<br>[javascript] view plain copy</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;  
//所谓&quot;深拷贝&quot;，就是能够实现真正意义上的数组和对象的拷贝。它的实现并不难，只要递归调用&quot;浅拷贝&quot;就行了。  
var Parent = {  
    name:&quot;lisi&quot;,  
    friends:[&apos;wangwu&apos;,&apos;zhaoliu&apos;]  
};  
function deepCopy(p,c){  
    var c = c || {};  
    for(var i in p){  
        //如果父元素的属性是对象类型并且是数组，则递归拷贝  
        if(typeof p[i] === &apos;object&apos;){  
            c[i] = (p[i].constructor === Array) ? [] : {};  
            deepCopy(p[i],c[i]);  
        }else{//如果是基本类型，则直接拷贝  
            c[i] = p[i];  
        }  
    }  
    return c;  
}  
var Child = deepCopy(Parent);  
Child.friends.push(&quot;zhangsan&quot;);  
console.log(Child.friends);//[&quot;wangwu&quot;, &quot;zhaoliu&quot;, &quot;zhangsan&quot;]  
console.log(Parent.friends);//[&quot;wangwu&quot;, &quot;zhaoliu&quot;]  
//jQuery库使用的就是这种继承方法  
&lt;/script&gt;  
</code></pre><p>参考博文<br>Javascript 面向对象编程（一）：封装<br>Javascript面向对象编程（二）：构造函数的继承<br>Javascript面向对象编程（三）：非构造函数的继承</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-新建文本文档" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/04/新建文本文档/" class="article-date">
  	<time datetime="2016-10-04T04:51:08.929Z" itemprop="datePublished">2016-10-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-get与post" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/07/get与post/" class="article-date">
  	<time datetime="2016-04-07T08:42:36.000Z" itemprop="datePublished">2016-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/07/get与post/">get与post</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-js中的定位" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/13/js中的定位/" class="article-date">
  	<time datetime="2016-03-13T08:58:19.000Z" itemprop="datePublished">2016-03-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/13/js中的定位/">js中的定位</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><ul>
<li>clientHeight和clientWidth用于描述元素内尺寸，是指元素内容+内边距 大小，不包括边框（IE下实际包括）、外边距、滚动条部分</li>
<li>offsetHeight和offsetWidth用于描述元素外尺寸，是指 元素内容+内边距+边框，不包括外边距和滚动条部分</li>
<li>clientTop和clientLeft返回内边距的边缘和边框的外边缘之间的水平和垂直距离，也就是左，上边框宽度</li>
<li>offsetTop和offsetLeft表示该元素的左上角（边框外边缘）与已定位的父容器（offsetParent对象）左上角的距离</li>
<li>offsetParent对象是指元素最近的定位（relative,absolute）祖先元素，递归上溯，如果没有祖先元素是定位的话，会返回null</li>
</ul>
<h3 id="视口大小"><a href="#视口大小" class="headerlink" title="视口大小"></a>视口大小</h3><p>客户区大小：元素内容及其内边距所占据的空间大小<br><img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091402.gif" alt="enter image description here"><br>document元素的clientHeight和clientWidth属性，就代表了视口的大小。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewport</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　　　width: <span class="built_in">document</span>.body.clientWidth,</span><br><span class="line">　　　　　　　　height: <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　　　width: <span class="built_in">document</span>.documentElement.clientWidth,</span><br><span class="line">　　　　　　　　height: <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的getViewport函数就可以返回浏览器窗口的高和宽。使用的时候，有三个地方需要注意：</p>
<ul>
<li>这个函数必须在页面加载完成后才能运行，否则document对象还没生成，浏览器会报错。；</li>
<li>大多数情况下，都是document.documentElement.clientWidth返回正确值。但是，在IE6的quirks模式中，document.body.clientWidth返回正确的值，因此函数中加入了对文档模式的判断。</li>
<li>clientWidth和clientHeight都是只读属性，不能对它们赋值<h3 id="包含滚动"><a href="#包含滚动" class="headerlink" title="包含滚动"></a>包含滚动</h3>滚动大小：包含滚动内容的元素的大小。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPagearea</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　　　width: <span class="built_in">document</span>.body.scrollWidth,</span><br><span class="line">　　　　　　　　height: <span class="built_in">document</span>.body.scrollHeight</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　　　width: <span class="built_in">document</span>.documentElement.scrollWidth,</span><br><span class="line">　　　　　　　　height: <span class="built_in">document</span>.documentElement.scrollHeight</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>但这个函数有一个问题。如果网页内容能够在浏览器窗口中全部显示，不出现滚动条，那么网页的clientWidth和scrollWidth应该相等。但是实际上，不同浏览器有不同的处理，这两个值未必相等。所以，我们需要取它们之中较大的那个值，因此要对getPagearea()函数进行改写。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPagearea</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">if</span> (<span class="built_in">document</span>.compatMode == <span class="string">"BackCompat"</span>)&#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　　　width: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollWidth,</span><br><span class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.body.clientWidth),</span><br><span class="line">　　　　　　　　height: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.body.scrollHeight,</span><br><span class="line">　　　　　　　　　　　　　　　　<span class="built_in">document</span>.body.clientHeight)</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">　　　　　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　　　width: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollWidth,</span><br><span class="line">　　　　　　　　　　　　　　<span class="built_in">document</span>.documentElement.clientWidth),</span><br><span class="line">　　　　　height: <span class="built_in">Math</span>.max(<span class="built_in">document</span>.documentElement.scrollHeight,</span><br><span class="line">　　　　　　　　　　　　　　<span class="built_in">document</span>.documentElement.clientHeight)</span><br><span class="line">　　　　　　&#125;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="绝对位置"><a href="#绝对位置" class="headerlink" title="绝对位置"></a>绝对位置</h3><p> 网页元素的绝对位置，指该元素的左上角相对于整张网页左上角的坐标。这个绝对位置要通过计算才能得到。首先，每个元素都有offsetTop和offsetLeft属性，表示该元素的左上角与父容器（offsetParent对象）左上角的距离。所以，只需要将这两个值进行累加，就可以得到该元素的绝对坐标。<br> <img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091403.gif" alt="enter image description here"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementLeft</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">var</span> actualLeft = element.offsetLeft;</span><br><span class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</span><br><span class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</span><br><span class="line">　　　　　　actualLeft += current.offsetLeft;</span><br><span class="line">　　　　　　current = current.offsetParent;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　<span class="keyword">return</span> actualLeft;</span><br><span class="line">　　&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getElementTop</span>(<span class="params">element</span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">var</span> actualTop = element.offsetTop;</span><br><span class="line">　　　　<span class="keyword">var</span> current = element.offsetParent;</span><br><span class="line">　　　　<span class="keyword">while</span> (current !== <span class="literal">null</span>)&#123;</span><br><span class="line">　　　　　　actualTop += current.offsetTop;</span><br><span class="line">　　　　　　current = current.offsetParent;</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　　　<span class="keyword">return</span> actualTop;</span><br><span class="line">　　&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="相对位置"><a href="#相对位置" class="headerlink" title="相对位置"></a>相对位置</h3><p>网页元素的相对位置，指该元素左上角相对于浏览器窗口左上角的坐标。<br>有了绝对位置以后，获得相对位置就很容易了，只要将绝对坐标减去页面的滚动条滚动的距离就可以了。滚动条滚动的垂直距离，是document对象的scrollTop属性；滚动条滚动的水平距离是document对象的scrollLeft属性。<br><img src="http://i260.photobucket.com/albums/ii7/ruanyf/blog/bg2009091404.gif" alt="enter image description here"><br>但是有一种简单方法getBoundingClientRect()：它返回一个对象，其中包含了left、right、top、bottom四个属性，分别对应了该元素的左上角和右下角相对于浏览器窗口（viewport）左上角的距离。<br>所以，网页元素的相对位置就是<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="keyword">this</span>.getBoundingClientRect().left;</span><br><span class="line"><span class="keyword">var</span> y = <span class="keyword">this</span>.getBoundingClientRect().top;</span><br></pre></td></tr></table></figure></p>
<p>再加上滚动距离，就可以得到绝对位置<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">varX=<span class="keyword">this</span>.getBoundingClientRect().left+<span class="built_in">Math</span>.max(<span class="built_in">document</span>.</span><br><span class="line">      documentElement.scrollLeft, <span class="built_in">document</span>.body.scrollLeft);</span><br><span class="line">varY=<span class="keyword">this</span>.getBoundingClientRect().top+<span class="built_in">Math</span>.max(<span class="built_in">document</span>.</span><br><span class="line">       documentElement.scrollTop,<span class="built_in">document</span>.body.scrollTop);</span><br></pre></td></tr></table></figure></p>
<hr>
<p>参考资料：<br><a href="http://www.ruanyifeng.com/blog/2009/09/find_element_s_position_using_javascript.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2009/09/find_element_s_position_using_javascript.html</a><br><a href="http://www.cnblogs.com/dolphinX/archive/2012/11/19/2777756.html" target="_blank" rel="external">http://www.cnblogs.com/dolphinX/archive/2012/11/19/2777756.html</a><br><a href="http://www.cnblogs.com/myzhibie/p/4256164.html?utm_source=tuicool" target="_blank" rel="external">http://www.cnblogs.com/myzhibie/p/4256164.html?utm_source=tuicool</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-负margin" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/12/负margin/" class="article-date">
  	<time datetime="2016-03-12T10:38:53.000Z" itemprop="datePublished">2016-03-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/12/负margin/">神奇的负margin</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在理解负margin的神奇作用之前，我们首先要了解的事情是margin的参考线，在此基础上，margin在普通文档流<br>或者与浮动结合或者与绝对定位结合才能产生神奇的作用。</p>
<h2 id="1、margin的参考线"><a href="#1、margin的参考线" class="headerlink" title="1、margin的参考线"></a>1、margin的参考线</h2><p>  何谓参考线？参考线就是 margin 移动的基准点，此基准点相对于 box 是静止的。而 margin 的数值，就是 box 相对于参考线的位移量。</p>
<p>  在 margin 中 top、right、bottom、left 的参考线并不一致为一类</p>
<ul>
<li>top 以containing block 的 content 上边或者垂直上方相连元素 margin 的下边为参考线垂直向下位移；</li>
<li>left 以 containing block 的 content 左边或者水平左方相连元素 margin 的右边为参考线水平向右位移。</li>
<li>right 以元素本身的 border 右边为参考线水平向右位移；</li>
<li>bottom 以元素本身的border 下边为参考线垂直向下位移。</li>
</ul>
<p>总之， top 和 left 都是以外元素为参考，而 right 和 bottom以本元素为参考。上面的位移方向是指 margin 数值为正值时候的情形，如果是负值则位移方向相反。</p>
<h2 id="2、magin的大小"><a href="#2、magin的大小" class="headerlink" title="2、magin的大小"></a>2、magin的大小</h2><p><img src="http://www.planabc.net/wp-content/uploads/2008/02/margin_example.gif" alt="enter image description here"></p>
<ul>
<li>物理大小指的是除去 margin，也就是包含 border 以内的 box 大小</li>
<li>逻辑大小，则是 box 通过 margin 解析规则解析后得到的大小（这或许可以解释为什么IE5会错误解析盒模型）。</li>
<li><p>在上图中，box 的实际显示的宽度等于 box 的逻辑大小，而 box 实际显示的高度等于 box 的物理大小，这说明 box 实际显示的大小可能是 box 的逻辑大小，也可能是 box的 物理大小，规则到底是怎样的——</p>
<p><code>box 的实际大小 = box 的物理大小 + 正的 margin</code></p>
</li>
</ul>
<p>总之：box 最后的显示大小等于 box 的 border 及 border 内的大小加上正的 margin 值。而负的 margin 值不会影响 box 的实际大小，如果是负的 top 或 left 值会引起 box 的向上或向左位置移动，如果是 bottom 或 right 只会影响下面 box 的显示的参考线。</p>
<h2 id="3、margin的表现"><a href="#3、margin的表现" class="headerlink" title="3、margin的表现"></a>3、margin的表现</h2><h3 id="margin在普通文档流中的作用"><a href="#margin在普通文档流中的作用" class="headerlink" title="margin在普通文档流中的作用"></a>margin在普通文档流中的作用</h3><p>负边距对这些由文档流控制的元素的作用是，会使它们在文档流中的位置发生偏移，但这种偏移不同于相对定位，通过相对定位偏移后，其仍然会坚守着它原 来占据的空间，不会让文档流的其它元素乘虚而入。而通过负边距进行偏移的元素，它会放弃偏移前占据的空间，这样它后面文档流中的其它元素就会“流”过来填充这部分空间。<code>在普通文档流中，元素的最终边界是由margin决定的，margin为负的时候相当于元素的边界向里收。</code><br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/201208131525134914.png" alt="enter image description here"><br>负边距好像能减小元素在文档流中的尺寸一样，但事实上元素尺寸没有改变，只是文档流在计算元素位置时，会认为负边距把元素的尺寸减小了。<code>注意：文档流是从后面流向前面的，即文档流只能向左或者向上流动，不能向下或向右移动</code></p>
<h3 id="margin对浮动元素的影响"><a href="#margin对浮动元素的影响" class="headerlink" title="margin对浮动元素的影响"></a>margin对浮动元素的影响</h3><p>负边距对浮动元素的影响与负边距对文档流中元素的影响其实是差不多的。文档流中元素的位置由文档流的走向决定，浮动的元素也可以看成有一个“浮动流”存在，不过浮动流既可以向左，也可以向右。</p>
<p>比如下图是三个向左浮动的元素，宽高都是100px：<br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/201208131525242264.png" alt="enter image description here"><br>都设一个margin-right:-50px<br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/201208131525274508.png" alt="enter image description here"><br>我们把浏览器缩小了，然后因为宽度不够，元素3掉下来了<br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/201208131525291213.png" alt="enter image description here"><br>我们给元素3设一个margin-left:-80px<br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/201208131525356191.png" alt="enter image description here"><br>这时我们看到元素3上去了，而且还覆盖了元素2的一部分。继续元素3设为margin-left:-100px<br><img src="http://images.cnblogs.com/cnblogs_com/2050/201208/20120813152537420.png" alt="enter image description here"></p>
<h3 id="负margin对绝对定位的影响"><a href="#负margin对绝对定位的影响" class="headerlink" title="负margin对绝对定位的影响"></a>负margin对绝对定位的影响</h3><p>绝对定位的元素定义的top、right、bottom、left等值是元素自身的边界到最近的已定位的祖先元素的距离，这个元素自身的边界指的就 是margin定义的边界，所以，如果margin为正的时候，那它的边界是向外扩的，<code>如果margin为负的时候，则它的边界是向里收的</code></p>
<h2 id="4、负margin的妙用"><a href="#4、负margin的妙用" class="headerlink" title="4、负margin的妙用"></a>4、负margin的妙用</h2><ul>
<li>双飞翼布局<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"page"</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"hd"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"bd"</span>&gt;</span>        </span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"main"</span>&gt;</span>                  </span><br><span class="line">                    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"inner"</span>&gt;</span>双飞翼布局<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">div</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"sub"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>       </span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"extra"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">div</span>&gt;</span>   </span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"ft"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>; <span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#39c</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span>;&#125;</span></span><br><span class="line"><span class="class">.sub</span> <span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">480px</span></span></span>; <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">100%</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#f60</span></span></span>; <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span>;&#125;</span>   </span><br><span class="line"><span class="class">.extra</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>; <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">190px</span></span></span>; <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">190px</span></span></span>; </span><br><span class="line">       <span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#666</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span>;&#125;</span></span><br><span class="line"><span class="class">.inner</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span> <span class="number">190px</span> <span class="number">0</span> <span class="number">480px</span></span></span>;&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>圣杯布局<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"page"</span>&gt;</span>              </span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"hd"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>              </span><br><span class="line">         <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"bd"</span>&gt;</span>                   </span><br><span class="line">              <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"main"</span>&gt;</span>main<span class="tag">&lt;/<span class="title">div</span>&gt;</span>                </span><br><span class="line">              <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"sub"</span>&gt;</span>sub圣杯布局<span class="tag">&lt;/<span class="title">div</span>&gt;</span>                   </span><br><span class="line">              <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"extra"</span>&gt;</span>extra<span class="tag">&lt;/<span class="title">div</span>&gt;</span>       </span><br><span class="line">         <span class="tag">&lt;/<span class="title">div</span>&gt;</span>          </span><br><span class="line">         <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"ft"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100%</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#39c</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span></span>&#125;</span><br><span class="line"><span class="class">.sub</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">190px</span></span></span>;<span class="rule"><span class="attribute">margin-left</span>:<span class="value">-<span class="number">100%</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#f60</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span>;<span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;<span class="rule"><span class="attribute">left</span>:<span class="value">-<span class="number">190px</span></span></span></span>&#125;</span><br><span class="line"><span class="class">.extra</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">230px</span></span></span>;<span class="rule"><span class="attribute">margin-left</span>:<span class="value">-<span class="number">230px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#666</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">300px</span></span></span>;<span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;<span class="rule"><span class="attribute">right</span>:<span class="value">-<span class="number">230px</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#bd</span><span class="rules">&#123;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span> <span class="number">230px</span> <span class="number">0</span> <span class="number">190px</span></span></span></span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>水平垂直居中（负margin+定位）<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"test"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#test</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">200px</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">200px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#F60</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;<span class="rule"><span class="attribute">left</span>:<span class="value"><span class="number">50%</span></span></span>;<span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">50%</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">margin-left</span>:<span class="value">-<span class="number">100px</span></span></span>;<span class="rule"><span class="attribute">margin-top</span>:<span class="value">-<span class="number">100px</span></span></span></span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>去除列表右边框<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"> <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素5<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span>子元素6<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">body</span>,<span class="tag">ul</span>,<span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span></span>&#125;<span class="tag">ul</span>,<span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">list-style</span>:<span class="value">none</span></span></span>&#125;</span><br><span class="line"><span class="id">#test</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">320px</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">210px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#CCC</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#test</span> <span class="tag">ul</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin-right</span>:<span class="value">-<span class="number">10px</span></span></span>;<span class="rule"><span class="attribute">zoom</span>:<span class="value"><span class="number">1</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#test</span> <span class="tag">ul</span> <span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100px</span></span></span>;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#F60</span></span></span>;</span><br><span class="line">            <span class="rule"><span class="attribute">margin-right</span>:<span class="value"><span class="number">10px</span></span></span>;<span class="rule"><span class="attribute">margin-bottom</span>:<span class="value"><span class="number">10px</span></span></span>;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span></span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>去除列表最后一个li元素的border-bottom<br>列表中我们经常会添加border-bottom值，最后一个li的border-bottom往往会与外边框重合，视觉上不雅观，往往要移除。<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"> <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>Test<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>Test<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>Test<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>Test<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>Test<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">body</span>,<span class="tag">ul</span>,<span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span></span></span></span>&#125;<span class="tag">ul</span>,<span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">liststyle</span>:<span class="value">none</span></span></span>&#125;</span><br><span class="line"><span class="id">#test</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">20px</span></span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">390px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#f4f8fc</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">border-radius</span>:<span class="value"><span class="number">3px</span></span></span>;<span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">2px</span> solid <span class="hexcolor">#d7e2ec</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#test</span> <span class="tag">li</span><span class="rules">&#123;<span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">25px</span></span></span>;<span class="rule"><span class="attribute">line-height</span>:<span class="value"><span class="number">25px</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">5px</span></span></span>;</span><br><span class="line">      <span class="rule"><span class="attribute">border-bottom</span>:<span class="value"><span class="number">1px</span> dotted <span class="hexcolor">#d5d5d5</span></span></span>;<span class="rule"><span class="attribute">margin-bottom</span>:<span class="value">-<span class="number">1px</span></span></span></span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>多列等高布局<br>此例关键是给每个框设置大的底部内边距，然后用数值相似的负外边距消除这个高度。这会导致每一列溢出容器元素，如果把外包容器的overflow属性设为hidden，列就在最高点被裁切。<figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"> <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"height:50px"</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"height:100px"</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span> <span class="attribute">style</span>=<span class="value">"height:200px"</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">body</span>,<span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#wrap</span><span class="rules">&#123;<span class="rule"><span class="attribute">overflow</span>:<span class="value">hidden</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">580px</span></span></span>;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span> auto</span></span></span>&#125;</span><br><span class="line"><span class="id">#left</span>,<span class="id">#center</span>,<span class="id">#right</span><span class="rules">&#123;<span class="rule"><span class="attribute">margin-bottom</span>:<span class="value">-<span class="number">200px</span></span></span>;<span class="rule"><span class="attribute">padding-bottom</span>:<span class="value"><span class="number">200px</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#left</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">140px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#777</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#center</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">300px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#888</span></span></span></span>&#125;</span><br><span class="line"><span class="id">#right</span><span class="rules">&#123;<span class="rule"><span class="attribute">float</span>:<span class="value">right</span></span>;<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">140px</span></span></span>;<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#999</span></span></span></span>&#125;</span><br><span class="line"><span class="tag">p</span><span class="rules">&#123;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#FFF</span></span></span>;<span class="rule"><span class="attribute">text-align</span>:<span class="value">center</span></span></span>&#125;</span><br></pre></td></tr></table></figure>
<p>参考资料</p>
<ul>
<li><a href="http://www.planabc.net/2007/03/18/css_attribute_margin/" target="_blank" rel="external">http://www.planabc.net/2007/03/18/css_attribute_margin/</a> </li>
<li><a href="http://www.cnblogs.com/2050/archive/2012/08/13/2636467.html" target="_blank" rel="external">http://www.cnblogs.com/2050/archive/2012/08/13/2636467.html</a></li>
<li><a href="http://segmentfault.com" target="_blank" rel="external">http://segmentfault.com</a></li>
<li><a href="http://www.cnblogs.com/jscode/archive/2012/08/28/2660078.html" target="_blank" rel="external">http://www.cnblogs.com/jscode/archive/2012/08/28/2660078.html</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-js中的this" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/08/js中的this/" class="article-date">
  	<time datetime="2016-03-08T13:53:43.000Z" itemprop="datePublished">2016-03-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/08/js中的this/">js中的this</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>javascript中的this指向总是让人头昏脑涨，经过几天的梳理，我对this的认识有了一个较为深入一点的认识，虽然可能还不够全面。我认为确定this指向最关键的一定要认识到：this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，实际上this的最终指向的是那个调用它的对象。我们从几个栗子来理解：<br>eg1：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> user = <span class="string">"chanda"</span>;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//undefined</span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Window</span></span><br><span class="line">   &#125;</span><br><span class="line">   a();</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> user = <span class="string">"chanda"</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//undefined</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Window</span></span><br><span class="line">  &#125;</span><br><span class="line">  a();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">var</span> user = <span class="string">"chanda"</span>;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//undefined</span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//Window</span></span><br><span class="line">   &#125;</span><br><span class="line">   a();</span><br></pre></td></tr></table></figure>
<p>按照我们上面说的this最终指向的是调用它的对象，这里的函数a实际是被Window对象调用的，<br>证明如下;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> user = <span class="string">"chanda"</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//undefined</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);　　<span class="comment">//Window</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.a();</span><br></pre></td></tr></table></figure></p>
<p>再举个栗子<br>eg2:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">        user:<span class="string">"chanda"</span>,</span><br><span class="line">        fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.user);  <span class="comment">//chanda</span></span><br><span class="line">        &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    o.fn();</span><br></pre></td></tr></table></figure></p>
<p> 这里的this指向的是对象o，因为你调用这个fn是通过o.fn()执行的，那自然指向就是对象o，这个结论与开头一样：this的指向在函数创建的时候是决定不了的，在调用的时候才能决定，谁调用的就指向谁。<br> 再看栗子3<br>   eg3:  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">        user:<span class="string">"chanda"</span>,</span><br><span class="line">        fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.user); <span class="comment">//chanda</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.o.fn();</span><br></pre></td></tr></table></figure>
<p>这段代码和上面的那段代码几乎是一样的，但是这里的this为什么不是指向window，如果按照上面的理论，最终this指向的是调用它的对象，这里先说个而外话，window是js中的全局对象，我们创建的变量实际上是给window添加属性，所以这里可以用window点o对象。这里先不解释为什么上面的那段代码this为什么没有指向window，我们再来看一段代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">        a:<span class="number">10</span>,</span><br><span class="line">        b:&#123;</span><br><span class="line">            a:<span class="number">12</span>,</span><br><span class="line">            fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">//12</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    o.b.fn();</span><br></pre></td></tr></table></figure>
<p>这里同样也是对象o点出来的，但是同样this并没有执行它，那你肯定会说我一开始说的那些不就都是错误的吗？其实也不是，只是一开始说的不准确，接下来我将补充一句话，我相信你就可以彻底的理解this的指向的问题。</p>
<ul>
<li>情况1：如果一个函数中有this，但是它没有被上一级的对象所调用，那么this指向的就是window，这里需要说明的是在js的严格版中this指向的不是window，但是我们这里不探讨严格版的问题，你想了解可以自行上网查找。</li>
<li>情况2：如果一个函数中有this，这个函数有被上一级的对象所调用，那么this指向的就是上一级的对象。<br>情况3：如果一个函数中有this，这个函数中包含多个对象，尽管这个函数是被最外层的对象所调用，this指向的也只是它上一级的对象，例子3可以证明</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">       a:<span class="number">10</span>,</span><br><span class="line">       b:&#123;</span><br><span class="line">          <span class="comment">// a:12,</span></span><br><span class="line">           fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">//undefined</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   o.b.fn();</span><br></pre></td></tr></table></figure>
<p>尽管对象b中没有属性a，这个this指向的也是对象b，因为this只会指向它的上一级对象，不管这个对象中有没有this要的东西。<br>   还有一种比较特殊的情况，栗子4：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">       a:<span class="number">10</span>,</span><br><span class="line">       b:&#123;</span><br><span class="line">           a:<span class="number">12</span>,</span><br><span class="line">           fn:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">               <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">//undefined</span></span><br><span class="line">               <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//window</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">var</span> j = o.b.fn;</span><br><span class="line">   j();</span><br></pre></td></tr></table></figure></p>
<p>   这里this指向的是window，是不是有些蒙了？其实是因为你没有理解一句话，这句话同样至关重要。this永远指向的是最后调用它的对象，也就是看它执行的时候是谁调用的，例子4中虽然函数fn是被对象b所引用，但是在将fn赋值给变量j的时候并没有执行所以最终指向的是window，这和例子3是不一样的，例子3是直接执行了fn。<br><code>构造函数版this</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">"chanda"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> Fn();</span><br><span class="line">    <span class="built_in">console</span>.log(a.user); <span class="comment">//chanda</span></span><br></pre></td></tr></table></figure>
<p> 这里之所以对象a可以点出函数Fn里面的user是因为new关键字可以改变this的指向，将这个this指向对象a，为什么我说a是对象，因为用了new关键字就是创建一个对象实例，理解这句话可以想想我们的例子3，我们这里用变量a创建了一个Fn的实例（相当于复制了一份Fn到对象a里面），此时仅仅只是创建，并没有执行，而调用这个函数Fn的是对象a，那么this指向的自然是对象a，那么为什么对象Fn中会有user，因为你已经复制了一份Fn函数到对象a中，用了new关键字就等同于复制了一份。<br><code>当this碰到return时</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">    <span class="built_in">console</span>.log(a.user); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p>
<p>  再举个栗子   </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">    <span class="built_in">console</span>.log(a.user); <span class="comment">//undefined</span></span><br><span class="line">    </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">    <span class="built_in">console</span>.log(a.user); <span class="comment">//chanda</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">    <span class="built_in">console</span>.log(a.user); <span class="comment">//chanda</span></span><br></pre></td></tr></table></figure>
<p>什么意思呢？如果返回值是一个对象，那么this指向的就是那个返回的对象，如果返回值不是一个对象那么this还是指向函数的实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span><br><span class="line">       </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">//fn &#123;user: "chanda"&#125;</span></span><br></pre></td></tr></table></figure>
<p>还有一点就是虽然null也是对象，但是在这里this还是指向那个函数的实例，因为null比较特殊。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)   </span>&#123;  </span><br><span class="line">       <span class="keyword">this</span>.user = <span class="string">'chanda'</span>;  </span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="keyword">new</span> fn;  </span><br><span class="line">   <span class="built_in">console</span>.log(a.user); <span class="comment">//chanda</span></span><br></pre></td></tr></table></figure>
<p>  知识点：1.在严格版中的默认的this不再是window，而是undefined。<br> 2.new操作符会改变函数this的指向问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.num = <span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="keyword">new</span> fn();</span><br><span class="line">   <span class="built_in">console</span>.log(a.num); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>为什么this会指向a？首先new关键字会创建一个空的对象，然后会自动调用一个函数apply方法，将this指向这个空对象，这样的话函数内部的this就会被这个空的对象替代。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-作用域" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/07/作用域/" class="article-date">
  	<time datetime="2016-03-07T08:33:50.000Z" itemprop="datePublished">2016-03-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/07/作用域/">作用域</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> javascript的函数与其他语言不同，其作用域也有自己的特征，为了更好的理解js语言的特征，对其作用域做一个整理。</p>
<h3 id="1-全局作用域"><a href="#1-全局作用域" class="headerlink" title="1.全局作用域"></a>1.全局作用域</h3><p> 所有浏览器都支持 window 对象，它表示浏览器窗口，JavaScript 全局对象、函数以及变量均自动成为 window 对象的成员。所以，全局变量是 window 对象的属性，全局函数是 window 对象的方法，甚至 HTML DOM 的 document 也是 window 对象的属性之一。<br>  全局变量是JavaScript里生命周期（一个变量多长时间内保持一定的值）最长的变量，其将跨越整个程序，可以被程序中的任何函数方法访问。<br>   在全局下声明的变量都会在window对象下，都在全局作用域中，我们可以通过window对象访问，也可以直接访问。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"jeri"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.name); <span class="comment">// 输出:jeri</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">name = <span class="string">"jeri"</span>;</span><br><span class="line">alert(name);</span><br><span class="line">&#125;            </span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br></pre></td></tr></table></figure></p>
<p>全局变量存在于整个函数的生命周期中，然而其在全局范围内很容易被篡改，我们在使 用全局变量时一定要小心，尽量不要使用全局变量。在函数内部声明变量没有使用var也会产生全局变量，会为我们造成一些混乱，比如变量覆盖等。所以，我们 在声明变量的任何时候最好都要带上var。<br>全局变量存在于程序的整个生命周期，但并不是通过其引用我们一定可以访问到全局变量。</p>
<h3 id="2-词法作用域"><a href="#2-词法作用域" class="headerlink" title="2.词法作用域"></a>2.词法作用域</h3><p>词法作用域：函数在定义它们的作用域里运行，而不是在执行它们的作用域里运行。也就是说词法作用域取决于源码，通过静态分析就能确定，因此词法作用域也叫做静态作用域。with和eval除外，所以只能说JS的作用域机制非常接近词法作用域（Lexicalscope）。词法作用域也可以理解为一个变量的可见性，及其文本表述的模拟值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"global"</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">"jeri"</span>;</span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="built_in">console</span>.log(fun()); <span class="comment">// 输出:jeri</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:global</span></span><br></pre></td></tr></table></figure>
<p> 在通常情况下，变量的查询从最近接的绑定上下文开始，向外部逐渐扩展，直到查询到第一个绑定，一旦完成查找就结束搜索。就像上例，先查找离它最近的name=”jeri”，查询完成后就结束了，将第一个获取的值作为变量的值。</p>
<h3 id="3-动态作用域"><a href="#3-动态作用域" class="headerlink" title="3.动态作用域"></a>3.动态作用域</h3><p>在编程实践中，最容易低估和过度滥用的概念就是动态作用域，因为很少有语言支持这种方式为绑定解析方案。<br>动态作用域与词法作用域相对而言的，不同于词法作用域在定义时确定，动态作用域在执行时确定，其生存周期到代码片段执行为止。动态变量存在于动态作用域中，任何给定的绑定的值，在确定调用其函数之前，都是不可知的。<br>在代码执行时，对应的作用域链常常是保持静态的。然而当遇到with语句、 call方法、apply方法和try-catch中的catch时，会改变作用域链的。以with为例，在遇到with语句时，会将传入的对象属性作为 局部变量来显示，使其便于访问，也就是说把一个新的对象添加到了作用域链的顶端，这样必然影响对局部标志符的解析。当with语句执行完毕后，会把作用域链恢复到原始状态。<br>实例如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"global"</span>;</span><br><span class="line"> <span class="comment">// 使用with之前</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:global </span></span><br><span class="line"><span class="keyword">with</span>(&#123;name:<span class="string">"jeri"</span>&#125;)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用with之后，作用域链恢复</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:global</span></span><br></pre></td></tr></table></figure></p>
<p>  在作用域链中有动态作用域时，this引用也会变得更加复杂，不再指向第一次创建时的上下文，而是由调用者确定。比如在使用apply或call方法时，传入它们的第一个参数就是被引用的对象。实例如下：<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">globalThis</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;             </span><br><span class="line">globalThis(); <span class="comment">// 输出:Window &#123;document: document,external: Object…&#125;</span></span><br><span class="line">globalThis.call(&#123;name:<span class="string">"jeri"</span>&#125;); <span class="comment">// 输出:Object &#123;name: "jeri"&#125;</span></span><br><span class="line">globalThis.apply(&#123;name:<span class="string">"jeri"</span>&#125;,[]); <span class="comment">// 输出:Object &#123;name: "jeri"&#125;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="4-函数作用域"><a href="#4-函数作用域" class="headerlink" title="4.函数作用域"></a>4.函数作用域</h3><p>函数作用域，顾名思义就是在定义函数时候产生的作用域，这个作用域也可以称为局部作用域。和全局作用域相反，函数作用域一般只在函数的代码片段内可访问到，外部不能进行变量访问。在函数内部定义的变量存在于函数作用域中，其生命周期随着函数的执行结束而结束。实例如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"global"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"jeri"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br><span class="line"><span class="keyword">with</span> (&#123;name:<span class="string">"with"</span>&#125;) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:with</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br><span class="line"><span class="comment">// 不能访问函数作用域</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:global</span></span><br></pre></td></tr></table></figure></p>
<h3 id="5-没有块级作用域"><a href="#5-没有块级作用域" class="headerlink" title="5.没有块级作用域"></a>5.没有块级作用域</h3><p>不同于其他编程语言，在JavaScript里并没有块级作用域，也就是说在for、if、while等语句内部的声明的变量与在外部声明是一样的，在这些语句外部也可以访问和修改这些变量的值。实例如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"jeri"</span>;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:jeri</span></span><br><span class="line">name = <span class="string">"change"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 输出:change</span></span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br></pre></td></tr></table></figure></p>
<h3 id="6-作用域链"><a href="#6-作用域链" class="headerlink" title="6.作用域链"></a>6.作用域链</h3><p>JavaScript里一切皆为对象，包括函数。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。其中一个内部属性是作用域，包含了函数被创建的作用域中对象的集合，称为函数的作用域链，它用来保证对执行环境有权访问的变量和函数的有序访问。<br> 当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象填充。在全局作用域中创建的函数，其作用域链会自动成为全局作用域中的一员。而当函数执行时，其活动对象就会成为作用域链中的第一个对象（活 动对象：对象包含了函数的所有局部变量、命名参数、参数集合以及this）。在程序执行时，Javascript引擎会通过搜索上下文的作用域链来解析诸 如变量和函数名这样的标识符。其会从作用域链的最里面开始检索，按照由内到外的顺序，直到完成查找，一旦完成查找就结束搜索。如果没有查询到标识符声明，则报错。当函数执行结束，运行期上下文被销毁，活动对象也随之销毁。实例如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'global'</span>;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// output:global</span></span><br><span class="line">name = <span class="string">"change"</span>;</span><br><span class="line"><span class="comment">// 函数内部可以修改全局变量</span></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// output:change</span></span><br><span class="line"><span class="comment">// 先查询活动对象</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="string">"18"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">// output:18</span></span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br><span class="line"><span class="comment">// 函数执行完毕，执行环境销毁</span></span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">// output:Uncaught ReferenceError: age is not defined</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/02/27/hello-world/" class="article-date">
  	<time datetime="2016-02-27T05:20:35.023Z" itemprop="datePublished">2016-02-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/27/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 chandayang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>